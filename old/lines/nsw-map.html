<?php

require_once "../rail_template.php";
require_once "../db.php";
require_once "../util.php";

require_once "menubar.php"; /* for menubar() */
require_once "icon.php";    /* for get_location_icon() */

/*
if ($argv)
{
    for ($i=1;$i<count($argv);$i++)
    {
        $it = split("=",$argv[$i]);
        $_GET[$it[0]] = $it[1];
    }
}
*/


$t = new Rail_Template("map.tpl");
$t->setCurrentBlock("CONTROLS");
$t->setVariable("TOP", implode("\n", file("../top.inc"))); /* XXX */
$t->setVariable("NAVBAR", implode("\n", file("../navbar.inc")));
$t->setVariable("MENUBAR", menubar());
$t->parseCurrentBlock();

$t->setCurrentBlock("MAP");
$t->setVariable("IMAGE", "images/nsw-index.gif");
$t->setVariable("IMAGEMAP", image_map());
$t->parseCurrentBlock();

$t->setCurrentBlock("MAIN");
$t->setVariable("TITLE", "NSW Map");
$t->parseCurrentBlock();

$t->show();

exit;

function image_map()
{
    # XXX: hard-coded version
    return implode("\n", file("nsw.map"));
}

?>
